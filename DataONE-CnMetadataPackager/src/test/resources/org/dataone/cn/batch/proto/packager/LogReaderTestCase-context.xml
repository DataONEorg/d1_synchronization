<?xml version="1.0" encoding="UTF-8"?>

<!--
    Document   : LogReaderTestCase-context.xml
    Created on : June 4, 2010, 1:58 AM
    Author     : rwaltz
    Description:
        Purpose of the document follows.
-->

<beans  default-init-method="init"  xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

   <bean id="testPackageHarvestDirectoryResource" class="org.springframework.core.io.ClassPathResource">
       <constructor-arg value="/org/dataone/cn/batch/proto/packager"/>
   </bean>
    <bean id="testPackageHarvestDirectoryFile"
      factory-bean="testPackageHarvestDirectoryResource"
      factory-method="getFile"/>

    <bean id="testPackageHarvestDirectoryString"
        factory-bean="testPackageHarvestDirectoryFile"
        factory-method="getAbsolutePath" />
<!--   <bean id="testPackageHarvestDirectory" class="org.springframework.core.io.ClassPathResource">
       <constructor-arg value="/org/dataone/cn/batch/proto/packager/persistant.cache"/>
   </bean> -->
   <bean id="metadataPackageAccess" class="org.dataone.cn.batch.utils.MetadataPackageAccess">
        <property name="eventLogFilePersistDataPath" ref="testPackageHarvestDirectoryString"/>
        <property name="eventLogFilePersistDataName" ref="testLogFilePersistDataName" />
   </bean>
    <bean id="testLogReader" class="org.dataone.cn.batch.proto.packager.LogReader">
        <property name="eventLogFileName" value="test-event1.log" />
        <property name="eventLogFilePath" ref="testPackageHarvestDirectoryString"/>
        <property name="metadataPackageAccess" ref="metadataPackageAccess" />
    </bean>
    <bean id="testEvent2" class="java.lang.String">
        <constructor-arg value="test-event2.log" />
    </bean>
    <bean id="testEvent3" class="java.lang.String">
        <constructor-arg value="test-event3.log" />
    </bean>
    <bean id="testLogFilePersistDataName" class="java.lang.String">
        <constructor-arg value="persistent1.cache" />
    </bean>
</beans>