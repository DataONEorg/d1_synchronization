<?xml version="1.0" encoding="UTF-8"?>
<beans default-init-method="init" xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd" xmlns:aop="http://www.springframework.org/schema/aop">

<!--
    Document   : metadataPackagerService.xml
    Created on : July 23, 2010, 4:57 PM
    Author     : rwaltz
    Description:
        Purpose of the document follows.
-->
   <bean id="eventPersistence" class="org.dataone.cn.batch.proto.packager.ReplicationPersistence">
        <property name="persistentDataFileNamePath" value="${synchronize.persistentDataFileNamePath}"/>
        <property name="persistentDataFileName" value="${synchronize.persistentEventDataFileName}" />
   </bean>
    <bean id="eventLogReader" class="org.dataone.cn.batch.proto.packager.EventLogReader">
        <property name="logFileName" value="${synchronize.metacatEventLogFileName}" />
        <property name="logFilePath" value="${synchronize.metacatEventLogFileDirectory}"/>
        <property name="eventPersistence" ref="eventPersistence" />
    </bean>
     <bean id="metadataPackagerEventWriter" class="org.dataone.cn.batch.proto.packager.MetadataPackageWriter">
        <property name="readMetacatDirectory" value="${synchronize.metacatDocumentDirectory}" />
        <property name="nodeReferenceUtility" ref="mnNodeReferenceUtility" />
        <property name="writeDirectory" value="${synchronize.mercuryDatanetDirectory}" />
        <property name="scienceMetadataFormatPathMap" ref="scienceMetadataFormatPathMap"/>
        <property name="metadataPackageAccess" ref="eventPersistence" />
        <property name="validSciMetaObjectFormats" ref="validScienceMetadataFormats" />
    </bean>   




   <bean id="replicationPersistence" class="org.dataone.cn.batch.proto.packager.EventPersistence">
        <property name="persistentDataFileNamePath" value="${synchronize.persistentDataFileNamePath}"/>
        <property name="persistentDataFileName" value="${synchronize.persistentReplicationDataFileName}" />
   </bean>
    <bean id="replicationLogReader" class="org.dataone.cn.batch.proto.packager.ReplicationLogReader">
        <property name="logFileName" value="${synchronize.metacatReplicationLogFileName}" />
        <property name="logFilePath" value="${synchronize.metacatReplicationLogFileDirectory}"/>
        <property name="replicationPersistence" ref="replicationPersistence" />
    </bean>
     <bean id="metadataPackagerReplicationWriter" class="org.dataone.cn.batch.proto.packager.MetadataPackageWriter">
        <property name="readMetacatDirectory" value="${synchronize.metacatDocumentDirectory}" />
        <property name="nodeReferenceUtility" ref="mnNodeReferenceUtility" />
        <property name="writeDirectory" value="${synchronize.mercuryDatanetDirectory}" />
        <property name="scienceMetadataFormatPathMap" ref="scienceMetadataFormatPathMap"/>
        <property name="metadataPackageAccess" ref="replicationPersistence" />
        <property name="validSciMetaObjectFormats" ref="validScienceMetadataFormats" />
        <property name="cnWebUrl" value="http://cn.dataone.org/knb/metacat"/>
        <property name="metacatObjectFormatSkin" ref="metacatObjectFormatSkinMap" />

    </bean>

</beans>
